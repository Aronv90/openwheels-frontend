
<div class="invoice-estimate">

  <div class="pricing-details" ng-show="price">
    <div ng-if="booking.contractOptions && booking.contractOptions.length > 1"
         style="text-align: center;">
      <div class="form-group mw-button" style="margin-bottom: 5px;">
        <md-button class="md-icon-button" ng-click="">
          <ng-md-icon icon="keyboard_arrow_down" aria-hidden="true"></ng-md-icon>
        </md-button>
        <select id="res_contract" name="contract" ng-model="booking.contract" ng-options="c as (c.type.name + ' - ' + c.contractor.firstName) for c in booking.contractOptions">
          <option value="" disabled>-- {{ 'PICK_A_CONTRACT' | translate }} --</option>
        </select>
      </div>
    </div>

    <table>
      <tbody>
        <tr>
          <td class="description">
            <div class="name">
              {{ huurkosten }}
              <ng-md-icon ng-if="numDaysDiffCalcDays" size="20" icon="info_italic" class="info-icon" info-dialog="numDaysDiffCalcDays"></ng-md-icon>
            </div>
          </td>
          <td class="price">{{ price.rent | currency }}</td>
        </tr>
        <tr>
          <td class="description">
            <div class="name">
              Eigen risico verlagen{{ mustReduceOwnRisk ? '' : ':' }}
              <!--<md-checkbox ng-model="booking.riskReduction"></md-checkbox>-->
              <span style="white-space: nowrap;">
                <span ng-if="!mustReduceOwnRisk">
                  <span class="choice" ng-click="booking.riskReduction = true" ng-class="{ chosen: booking.riskReduction }">aan</span>
                  /
                  <span class="choice" ng-click="booking.riskReduction = false" ng-class="{ chosen: !booking.riskReduction }">uit</span>
                </span>
                &nbsp;<ng-md-icon size="20" icon="info_italic" class="info-icon" info-dialog="eigenRisico"></ng-md-icon>
              </span>
            </div>
          </td>
          <td class="price">{{ price.redemption | currency }}</td>
        </tr>
        <tr>
          <td class="description">
            <div class="name">Boekingskosten</div>
          </td>
          <td class="price">{{ price.booking_fee | currency }}</td>
        </tr>
        <tr>
          <td colspan="2"><div class="line"></div></td>
        </tr>
        <tr class="total" ng-if="$root.experiments.schattingKmKostenDropdown">
          <td class="description">
            <div class="name">Vaste huurkosten<span ng-if="!showPriceDetails">*</span></div>
          </td>
          <td class="price">{{ price.total | currency }}</td>
        </tr>
        <tr class="total" ng-if="!$root.experiments.schattingKmKostenDropdown">
          <td class="description">
            <div class="name">Vaste huurkosten</div>
          </td>
          <td class="price">{{ price.total | currency }}</td>
        </tr>
      </tbody>
    </table>

    <div ng-if="$root.experiments.schattingKmKostenDropdown">

      <h4 ng-if="!showPriceDetails" ng-click="toggleShowPriceDetails()">
        <a class="underline">*excl. schatting kilometerkosten</a>
        <ng-md-icon icon="expand_more"></ng-md-icon>
      </h4>
      <h4 ng-if="showPriceDetails" ng-click="toggleShowPriceDetails()">
        <a class="underline" style="text-trasform: uppercase;">Schatting kilometerkosten</a>
        <ng-md-icon icon="expand_less"></ng-md-icon>
      </h4>

      <div class="km-price-details slide-toggleable" ng-class="{ 'ct-show': showPriceDetails }">
        <table>
          <tbody>
            <tr ng-if="!resource.refuelByRenter">
              <td class="description">
                <div class="name">Brandstof <span class="km">{{ price.estimate_km_total }} km</span></div>
              </td>
              <td class="price">{{ price.fuel_per_kilometer * price.estimate_km_total | currency }}</td>
            </tr>
            <tr>
              <td class="description">
                <div class="name">Kilometerkosten <span class="km">{{ price.estimate_km_total }} km</span></div>
                <!--<div class="calculation">
                  waarvan {{ price.free_km_total }} km gratis
                  
                  <span ng-if="calculation.uponUserEstimate.paidKms > 0">
                    <br />
                    {{ resource.price.kilometerRate | currency }} x {{ calculation.uponUserEstimate.paidKms }} km
                  </span>
                </div>
                  -->
              </td>
              <td class="price">{{ (price.estimate_km_total - price.free_km_total) * resource.price.kilometerRate | currency }}</td>
            </tr>
            <tr>
              <td colspan="2"><div class="line"></div></td>
            </tr>
            <!--
            <tr class="total">
              <td class="description">
                <div class="name">Totale ritkosten</div>
              </td>
              <td class="price">{{ calculation.uponUserEstimate.total | currency }}</td>
            </tr>
            -->
            <tr class="total">
              <td class="description">
                <div class="name">Totaal te betalen</div>
              </td>
              <td class="price">{{ price.total + (price.fuel_per_kilometer * price.estimate_km_total) + (price.estimate_km_total - price.free_km_total) * resource.price.kilometerRate | currency }}</td>
            </tr>
          </tbody>
        </table>
        <p class="km-explanation">De kilometerkosten zijn gebaseerd op een schatting van het aantal km per uur. Rijd je minder? Dan kun je na afloop het teveel betaalde bedrag terugvragen.</p>
      </div>
    </div>
  </div>
</div>
