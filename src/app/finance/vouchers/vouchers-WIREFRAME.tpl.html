<!--
<div class="card">
  <div class="card-heading">
    <h2 class="card-title">
      <p>
        <i class="fa fa-fw fa-frown-o"></i>
      </p>
    </h2>
    We kunnen op dit moment helaas niet zien of je voldoende rijtegoed hebt voor jouw reserveringen. Probeer het later nog eens, of neem contact met ons op.
  </div>
</div>

<p>of:</p>

<div class="card">
  <div class="card-heading">
    <h2 class="card-title">
      <p><i class="fa fa-fw fa-check-circle text-success"></i>Je hebt nog voldoende rijtegoed</p>
    </h2>

    <div ng-show="credit && !showVoucherOptions">
      <div>
        Klik <a ng-click="toggleVoucherOptions(true)">hier</a> om extra rijtegoed te kopen. Wil je rijtegoed laten terugstorten? Ga dan naar <a>Mijn Financiën</a>.
      </div>
    </div>

    <div ng-show="showVoucherOptions">
      <div class="clearfix" style="margin: 0 -5px 15px -5px">
        <div ng-repeat="option in voucherOptions" class="pull-left" style="width: 20%; padding: 5px">
          <button ng-click="buyVoucher(option)" type="button" class="btn btn-block btn-success">{{ option | currency }}</button>
        </div>
      </div>
      <a href="" ng-click="toggleVoucherOptions(false)">Annuleren</a>
    </div>

  </div>
</div>


<p>of:</p>
 -->

<div class="card">
  <div class="card-heading">
    <h2 class="card-title">
      Bijna klaar! Alleen nog rijtegoed kopen
    </h2>
  </div>

<!--   <div class="card-body">
    <p>
    Je hebt nog <b>{{ requiredValue.value.voucher | currency }}</b> extra rijtegoed nodig voor jouw reserveringen.
    </p>

    <div ng-show="credit && !showVoucherOptions">

      <div ng-if="requiredValue.value.voucher > 0">
        <button type="button" class="btn btn-success" ng-click="buyVoucher(requiredValue.value.voucher)">
          Koop {{ requiredValue.value.voucher | currency }} rijtegoed
        </button>
        <button type="button" class="btn btn-link" ng-click="toggleVoucherOptions(true)">
          Ander bedrag
        </button>
      </div>

      <div ng-if="!(requiredValue.value.voucher > 0)">
        <button type="button" class="btn btn-success" ng-click="toggleVoucherOptions(true)">Koop rijtegoed</button>
      </div>
    </div>

    <div ng-show="showVoucherOptions">
      <div class="clearfix" style="margin: 0 -5px 15px -5px">
        <div ng-repeat="option in voucherOptions" class="pull-left" style="width: 20%; padding: 5px">
          <button ng-click="buyVoucher(option)" type="button" class="btn btn-block btn-success">{{ option | currency }}</button>
        </div>
      </div>
      <a href="" ng-click="toggleVoucherOptions(false)">Annuleren</a>
    </div>


  </div> -->
</div>


<div class="card" ng-repeat="booking in requiredValue.value.bookings" ng-init="isOpen={}; isOpen[0]=true">

  <div class="card-heading">

    <div class="media media--small">
      <a class="media-object pull-left" ui-sref="owm.resource.show({ resourceId: resource.id, city: resource.city })">
        <img class="img-resource-small" src="assets/img/resource-avatar-small.jpg">
      </a>

      <div class="media-body">

        <div class="pull-left">
          <div class="booking__timeframe booking__timeframe--accepted">
            <datetime datetime="01-01-2015 09:00"></datetime>
            <datetime datetime="01-01-2015 17:00"></datetime>
            <span class="tag tag-requested">Aanvraag</span>
          </div>
        </div>

        <div class="pull-left">
          <div class="resource__alias truncate">
            <a>
              Test's Wheels
            </a>
          </div>
          <div class="truncate">
            <i class="fa fa-map-marker fa-fw"></i> Moreelsepark, Utrecht
          </div>
          <div class="truncate">
            <i class="fa fa-user fa-fw"></i> Eigenaar</a>
          </div>
        </div>

      </div>
    </div>
  </div>

<!--   <div class="card-heading">
    <h3 class="card-title">
      <a href="" ng-click="isOpen[$index] = !!!isOpen[$index]">
        <i class="fa fa-fw" ng-class="{ 'fa-chevron-right': !isOpen[$index], 'fa-chevron-down': isOpen[$index] }"></i>
        {{ booking.title }}
      </a>
      {{ (booking.booking_price.total + booking.km_price) | currency }}
    </h3>
  </div> -->

  <div collapse="!isOpen[$index]">
    <div class="card-body">

      <table class="table">
        <tbody>
          <tr>
            <td style="width:100%">Huur</td><td class="text-right">{{ booking.booking_price.sub_total | currency }}</td>
          </tr>
          <tr>
            <td>Boekingskosten</td><td class="text-right">{{ booking.booking_price.booking_fee | currency }}</td>
          </tr>
          <tr>
            <td><b>Totale huurprijs</b></td><td class="text-right"><b>{{ (booking.booking_price.total) | currency }}</b></td>
          </tr>

          <tr>
            <td style="padding-top:25px">
              <i>Geschatte kilometers</i>
              <info-icon tooltip-placement="bottom" tooltip-html="'Omdat we nog niet weten hoeveel kilometers je zal rijden vragen we je meer rijtegoed te kopen dan je rit waarschijnlijk zal kosten. Dit bedrag vraag je na je rit eenvoudig terug, of bewaar je voor een volgende rit'"></info-icon>
            </td>
            <td style="padding-top:25px" class="text-right"><i>{{ booking.km_price | currency }}</i></td>
          </tr>
          <tr>
            <td><b>Benodigd rijtegoed</b></td><td class="text-right"><b>{{ (booking.booking_price.total + booking.km_price) | currency }}</b></td>
          </tr>
        </tbody>
      </table>

      <div class="alert alert-info">
        <input type="checkbox" />&nbsp;&nbsp;
        Eigen risico afkopen (€3,50 per dag)
      </div>

    </div>
  </div>
</div><!-- /card -->





<div class="card">
  <div class="card-heading">
    <h2 class="card-title">Rijtegoed</h2>
  </div>

  <div class="card-body">
    <!-- credit -->
    <div style="margin-bottom: 15px;">
      <span ng-if="!credit" class="text-muted">
        <i class="fa fa-spin fa-spinner"></i>&nbsp;Tegoed ophalen...
      </span>

      <span ng-if="credit.error">
        <i class="fa fa-warning text-warning"></i>&nbsp;Je rijtegoed is op dit moment niet beschikbaar.
      </span>

      <div ng-if="credit && !credit.error">
        <table class="table">
          <tr><td style="width:100%">Benodigd voor je reserveringen</td><td class="text-right">{{ requiredValue.value.sub_total | currency }}</td></tr>
          <tr><td>Openstaande facturen</td><td class="text-right">{{ requiredValue.value.debt | currency }}</td></tr>
          <tr><td>AF: Je huidige rijtegoed</td><td class="text-right">{{ requiredValue.value.credit | currency }}</td></tr>
          <tr><td>Totaal benodigd extra rijtegoed</td><td class="text-right">{{ requiredValue.value.total | currency }}</td></tr>
          <tr><td><b>Totaal benodigd extra rijtegoed (afgerond)</b></td><td class="text-right"><b>{{ requiredValue.value.voucher | currency }}</b></td></tr>
        </table>

        <div ng-show="credit && !showVoucherOptions">

          <div ng-if="requiredValue.value.voucher > 0">
            <button type="button" class="btn btn-success" ng-click="buyVoucher(requiredValue.value.voucher)">
              Koop {{ requiredValue.value.voucher | currency }} rijtegoed
            </button>
            <button type="button" class="btn btn-link" ng-click="toggleVoucherOptions(true)">
              Ander bedrag
            </button>
          </div>

          <div ng-if="!(requiredValue.value.voucher > 0)">
            <button type="button" class="btn btn-success" ng-click="toggleVoucherOptions(true)">Koop rijtegoed</button>
          </div>
        </div>

        <div ng-show="showVoucherOptions">
          <div class="clearfix" style="margin: 0 -5px 15px -5px">
            <div ng-repeat="option in voucherOptions" class="pull-left" style="width: 20%; padding: 5px">
              <button ng-click="buyVoucher(option)" type="button" class="btn btn-block btn-success">{{ option | currency }}</button>
            </div>
          </div>
          <a href="" ng-click="toggleVoucherOptions(false)">Annuleren</a>
        </div>

      </div>

    </div>
  </div>

</div><!-- /card -->

