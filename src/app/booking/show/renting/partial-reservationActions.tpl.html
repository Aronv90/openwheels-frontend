
<div ng-if="!details.bookingEndedReally || !booking.trip.finalized">

  <div class="card mw">
    <div class="card-body" style="padding-bottom: 0;">
      <p class="size-2 reservation-progress-summary" ng-if="!details.bookingEndedReally">
        {{ progress.summary }}
      </p>
      <p class="size-2 reservation-progress-summary" ng-if="details.bookingEndedReally && !booking.trip.finalized">
        De rit is afgelopen. Je kunt met de knop hieronder de kilometerstanden doorgeven of verifieren.
      </p>
      <div class="row is-flex" style="padding: 1rem 0; margin: 0 -.5rem !important;">
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="!details.bookingEndedReally">
          <a
            ng-click="editReservationTimeframeDialog($event)"
            class="mywheels-btn mywheels-btn-action"
            md-ink-ripple="#4796b6"
          >
            <ng-md-icon icon="schedule"></ng-md-icon>
            {{ details.bookingStarted ? 'Verlengen' : 'Wijzig begin- of eindtijd' }}
          </a>
        </div>
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="details.bookingStarted && !details.bookingEnded">
          <a
            ng-click="stopBooking(booking, $event)"
            class="mywheels-btn mywheels-btn-action"
            md-ink-ripple="#4796b6"
          >
            <ng-md-icon icon="schedule"></ng-md-icon>
            BeÃ«indig nu
          </a>
        </div>
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="!extraDrivers.noPermission && !details.bookingStarted && !perspective.isContractor">
          <a
            ng-click="extraDriversDialog($event)"
            class="mywheels-btn mywheels-btn-action"
            md-ink-ripple="#4796b6"
          >
            <ng-md-icon icon="people"></ng-md-icon>
            Wijzig extra bestuurders
          </a>
        </div>
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="!details.bookingStarted && !perspective.isContractor && !me.isBusinessConnected">
          <a
            ng-click="editRiskReductionDialog($event)"
            class="mywheels-btn mywheels-btn-action"
            md-ink-ripple="#4796b6"
          >
            <ng-md-icon icon="edit"></ng-md-icon>
            {{ booking.riskReduction ? 'Verlaag eigen risico niet' : 'Verlaag eigen risico' }}
          </a>
        </div>
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="!details.bookingStarted && !me.isBusinessConnected">
          <a
            ng-click="discountCodeDialog($event)"
            class="mywheels-btn mywheels-btn-action"
            md-ink-ripple="#4796b6"
          >
            <ng-md-icon icon="local_offer"></ng-md-icon>
            {{ discount.length > 0 ? 'Kortingscode' : 'Voeg kortingscode toe' }}
          </a>
        </div>
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="details.bookingStarted && !booking.resource.boardcomputer && !perspective.isContractor && !booking.trip.finalized">
          <a
            ng-click="kmStandenDialog($event)"
            class="mywheels-btn mywheels-btn-action"
            md-ink-ripple="#4796b6"
          >
            <ng-md-icon icon="straighten"></ng-md-icon>
            <span ng-if="booking.trip.odoBegin && booking.trip.odoEnd && (booking.trip.updatedBy.id !== me.id) && !booking.trip.finalized">Controleer kilometers</span>
            <span ng-if="!(booking.trip.odoBegin && booking.trip.odoEnd && (booking.trip.updatedBy.id !== me.id) && !booking.trip.finalized)">Administreer rit</span>
          </a>
        </div>
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="details.bookingEnded && allowDeclarations && !perspective.isContractor && details.accepted">
          <a
            ng-click="declarationsDialog($event)"
            class="mywheels-btn mywheels-btn-action"
            md-ink-ripple="#4796b6"
          >
            <ng-md-icon icon="local_gas_station"></ng-md-icon>
            Tankbonnen
          </a>
        </div>
        <div class="col-xxs-12 col-xs-6" style="padding: 0;" ng-if="!details.bookingStarted">
          <a
            ng-click="cancelReservationDialog($event)"
            class="mywheels-btn mywheels-btn-action action-cancel"
            md-ink-ripple="#c00"
          >
            <ng-md-icon icon="delete"></ng-md-icon>
            Annuleer reservering
          </a>
        </div>
      </div>
    </div>
  </div>

</div>
